# Kaizen - AGENTS.md

## Project Overview

**Kaizen** (改善) - meaning "continuous improvement" in Japanese - is an automated journal system that tracks and visualizes daily progress on algorithm and system design challenges. It transforms your Git commit history into a beautiful, self-updating portfolio.

**Core Concept:**
1. Commit algorithm solutions using structured commit messages
2. Automated parser extracts data from Git history
3. Frontend visualizes progress with heatmaps and timelines

**Live Site:** [kaizen.josimar-silva.com](https://kaizen.josimar-silva.com/)

## Monorepo Structure

This is a monorepo containing two main sub-projects:

```
kaizen/
├── kaizen-parser/       # Rust CLI - parses Git commits → data.json
│   └── AGENTS.md       # Parser-specific AI agent instructions
├── website/            # Next.js frontend - visualizes the data
│   └── AGENTS.md      # Website-specific AI agent instructions
├── algorithms/         # Algorithm solutions (organized by date)
├── .github/workflows/  # CI/CD automation
├── docs/              # Project documentation
└── AGENTS.md          # This file - global project context
```

**Important:** For sub-project specific work, refer to the AGENTS.md file in that sub-project directory:
- [`kaizen-parser/AGENTS.md`](./kaizen-parser/AGENTS.md) - Rust parser details
- [`website/AGENTS.md`](./website/AGENTS.md) - Next.js website details

## Technology Stack

### Backend (kaizen-parser)
- **Language:** Rust (edition 2024, MSRV 1.88.0)
- **Purpose:** Parse Git commits and generate `data.json`
- **Key Libraries:** git2, serde, regex, rayon, clap

### Frontend (website)
- **Framework:** Next.js 16 (App Router)
- **Language:** TypeScript 5.9
- **UI:** React 19, Tailwind CSS 4, Radix UI
- **Testing:** Jest (unit), Playwright (e2e)

## Monorepo Structure

```
/
├── .github/workflows/     # GitHub Actions for automation
│   ├── kaizen.yaml       # Daily parser run + data generation
│   ├── docker-website.yaml   # Docker builds
│   └── deploy-website.yaml   # Website deployment
├── algorithms/           # Algorithm solutions organized by date
├── docs/                # Project documentation
├── website/             # Next.js frontend application
│   ├── AGENTS.md       # Website-specific instructions
│   ├── public/data.json # Generated by parser
│   ├── src/            # Source code
│   ├── package.json    # Dependencies
│   ├── justfile        # Build commands
│   └── ...
├── kaizen-parser/       # Rust CLI parser
│   ├── AGENTS.md       # Parser-specific instructions
│   ├── src/main.rs     # Main parser logic
│   ├── Cargo.toml      # Rust dependencies
│   ├── justfile        # Build commands
│   └── ...
├── AGENTS.md           # This file (global context)
├── README.md           # Human-readable project overview
├── cliff.toml          # Changelog configuration
└── renovate.json       # Dependency update automation
```

## Commit Message Convention

All commits must follow [Conventional Commits](https://www.conventionalcommits.org/) specification.

**Format:**
```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Scopes:**
Defined in `cliff.toml` at the project root. Common scopes include:
- `website` - Frontend changes
- `parser` - Backend parser changes
- `deps` - Dependency updates
- `ci` - CI/CD changes
- `docs` - Documentation updates

**Types:**
- `feat` - New feature
- `fix` - Bug fix
- `refactor` - Code refactoring
- `test` - Test additions/changes
- `docs` - Documentation only
- `chore` - Maintenance tasks
- `style` - Code style changes
- `perf` - Performance improvements

**Examples:**
```
feat(website): add dark mode toggle
fix(parser): correct date parsing for edge cases
chore(deps): update Next.js to v16
test(website): add timeline component tests
```

**Atomic Commits:**
Keep commits focused and atomic - each commit should represent a single logical change.

## Git Commands

**Preferred workflow commands:**
- `git pls` - Alias for `git pull && git status`
- Use atomic commits for better history

## Development Workflow

### Standard Workflow
1. **Design** - Plan the implementation
2. **Write tests** - Test-driven development when possible
3. **Lint and format** - Use `just check`
4. **Implement** - Write the code
5. **Run tests** - Use `just test` (and `just test-e2e` for website)
6. **Commit** - Follow atomic commits and conventional commits

### Linting and Formatting

**Website (Next.js/TypeScript):**
- ESLint with Next.js and Prettier configs
- Prettier for code formatting
- Commands: `just check`, `just format`, `just lint`

**Parser (Rust):**
- `cargo fmt` for code formatting
- `cargo clippy` for linting
- Commands: `just format`, `just lint`

**Global Commands:**
```bash
just check   # Lint and format check
just format  # Auto-fix linting and formatting
just lint    # Check for linting issues
```

### Quick Start Commands

**Website:**
```bash
cd website
npm install      # Install dependencies
npm run dev      # Start dev server
npm run build    # Production build
npm run test     # Unit tests (Jest)
npm run test-e2e # E2E tests (Playwright)
```

**Parser:**
```bash
cd kaizen-parser
cargo build --release  # Production build
cargo test            # Run tests
```

For detailed commands, see sub-project AGENTS.md files.

## Testing Strategy

### Website Testing
- **Unit Tests:** Jest with React Testing Library
- **E2E Tests:** Playwright (Chromium, Firefox, WebKit)
- **Coverage:** Generated for both test types
- **Commands:** `just test`, `just test-e2e`

### Parser Testing
- **Unit Tests:** Cargo test framework
- **Coverage:** Tarpaulin with Lcov output
- **Commands:** `just test`

## Code Quality & Validation

The project enforces quality through:

1. **Linting:** ESLint (website) + Clippy (parser)
2. **Formatting:** Prettier (website) + rustfmt (parser)
3. **Type Safety:** TypeScript strict mode + Rust ownership system
4. **Testing:** Unit and E2E test coverage
5. **CI/CD:** Automated checks on all PRs

**Pre-release workflow:**
```bash
just pre-release  # In either sub-project
```

This validates everything before creating a release commit.

## CI/CD & Automation

### GitHub Actions Workflows
- **`kaizen.yaml`** - Daily automated parser run and data generation
- **`docker-website.yaml`** - Build and publish Docker images
- **`deploy-website.yaml`** - Deploy website to production
- **`codeql.yaml`** - Security scanning with CodeQL

### Dependency Management
- **Renovate Bot** - Automated dependency updates (config: `renovate.json`)
- Updates are grouped by package manager and severity

### Changelog
- Generated using `cliff.toml` configuration
- Follows conventional commits for automatic categorization

## Project-Specific Conventions

### Algorithm Solutions Directory
The `algorithms/` directory contains daily algorithm solutions organized by date. While not a sub-project with builds, it's the primary data source for the parser.

### Data Flow
```
Git Commits → kaizen-parser → data.json → website → User
```

1. Commit algorithm solutions with structured messages
2. Parser extracts data and generates `data.json`
3. Website reads `data.json` and renders UI
4. GitHub Actions automates this daily

### Commit Message Format for Algorithm Solutions
See parser documentation for the specific format expected for algorithm solution commits.

## Notes for AI Agents

### Context Awareness
- **Always check which sub-project you're working in** before running commands
- Refer to the relevant sub-project AGENTS.md for detailed instructions:
  - Working on website? → See `website/AGENTS.md`
  - Working on parser? → See `kaizen-parser/AGENTS.md`
- This root file provides global context only

### Cross-Project Considerations
- Changes to `data.json` schema require updates to **both** parser and website
- Version bumps should be coordinated between sub-projects
- Test the full data pipeline when making schema changes

### Working with Just
- Both sub-projects use `justfile` for common commands
- Commands are consistent across sub-projects: `build`, `test`, `lint`, `format`, `check`
- Always run commands from the appropriate sub-project directory

### Common Pitfalls
1. **Don't modify `data.json` directly** - it's generated by the parser
2. **Run pre-build scripts** - website has automatic pre-build hooks
3. **Respect MSRV** - Parser requires Rust 1.88.0+
4. **Use frozen lockfiles in CI** - Both projects use locked dependencies

### Repository Links
- **Homepage:** [kaizen.josimar-silva.com](https://kaizen.josimar-silva.com/)
- **Repository:** [github.com/josimar-silva/kaizen](https://github.com/josimar-silva/kaizen)
- **Issue Tracker:** GitHub Issues
- **License:** MIT

## Additional Resources

- **README.md** - Human-readable project overview and quick start
- **website/README.md** - Website-specific documentation
- **kaizen-parser/README.md** - Parser-specific documentation
- **docs/** - Extended project documentation
- **cliff.toml** - Commit scopes and changelog configuration
- **CODE_OF_CONDUCT.md** - Community guidelines
